<style type="text/css">
  .clear {
    clear: both;
    display: block;
  }
  .content {
    width: 1200px;
    margin: 10px auto 10px auto;
    line-height: 170%;
    padding-bottom: 15px;
  }
  .row,
  .row-alt {
    border: 1px solid #ccc;
    background: #e6f9ff;
    width: 800px;
    padding: 20px 10px 0px 10px;
    margin-bottom: 10px;
  }
  input[type="text"],
  input[type="select"],
  select {
    padding: 4px;
    margin-bottom: 2px;
  }
  /*input[type^=ra]input[type$=io]input[type*=d]*/
  .btn,
  .btn_add {
    font-size: 11px;
    font-weight: bold;
    color: #fff;
    background-color: #000;
    padding-top: 5px;
    padding-right: 15px;
    padding-bottom: 5px;
    padding-left: 15px;
    border-top-style: none;
    border-right-style: none;
    border-bottom-style: none;
    border-left-style: none;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
    margin: 0 1px;
  }
  .btn_add {
    color: #000;
    background-color: #aedd27;
    border: 1px solid #84a71b;
  }
  input.btn:hover,
  .btn_add:hover {
    cursor: pointer;
  }
  .btn:hover {
    cursor: pointer;
    color: #fff;
    text-decoration: none;
  }
  a.btn {
    color: #fff;
  }
  a.btn:hover {
    color: #fff;
    text-decoration: none;
  }
  .text_black_bold,
  .text_correct,
  .text_black_bold_sm {
    color: #666;
    font-size: 12px;
    font-weight: bold;
    width: 400px;
    display: block;
    float: left;
  }
  .text_correct {
    width: 100px;
  }
  ,
  .text_black_bold_sm {
    width: 0;
    width: auto;
  }
  #divTxt {
    display: block;
    width: auto;
    overflow: hidden;
  }
  #divTxt label {
    /*width: auto;*/
    width: 80px;
    font-weight: bold;
    padding-top: 6px;
    font-size: 12px;
  }
  #divTxt input {
    width: 370px;
  }
  #divTxt input.chk {
    width: 20px;
    margin-left: 15px;
  }
  #divTxt input.sm {
    width: 60px;
    margin-left: 15px;
  }
  .col_label,
  .col_input_type,
  .col_input_name,
  .col_reqd {
    float: left;
    width: 400px;
    color: red; /*border: 1px solid red;*/
    margin: 0px 5px 10px 0px;
  }
  .col_input_type {
    width: 150px;
  }
  .col_reqd {
    width: 100px;
  }
  .col_process {
    float: left;
    width: 100px;
  }
  .col_remove {
    float: left;
    width: 20px;
    padding-top: 5px;
  }
  .col_spacer {
    float: left;
    width: 56px;
  }
  .col_extra_values,
  .col_extra_values_dropdown {
    float: left;
    width: 600px;
    margin: 0px 0px 20px 80px;
    display: none;
  }
  .clear_inputs {
    clear: both;
    display: block;
    height: 5px;
    width: 100%;
  }
  label.error {
    float: none;
    color: red;
    padding-left: 0.5em;
    vertical-align: top;
  }
  input.error,
  select.error,
  textarea.error {
    border: 2px solid red;
  }
  .validate_checkbox_oneormore {
    /*width: 200px;*/
    float: left;
  }
  .error_checkbox {
    color: red;
    padding-left: 0.5em;
    border: 2px solid red;
  }
  #divTxt_header span.q,
  #divTxt_header span.lbl,
  #divTxt_header span.q_typ,
  #divTxt_header span.q_reqd {
    display: inline-table;
    width: 80px;
    padding: 4px;
    font-weight: bold;
  }
  #divTxt_header span.lbl {
    width: 365px;
  }
  #divTxt_header span.q_req {
    width: 100px;
    margin-left: 25px;
  }
  #divTxt_header span.q_typ {
    width: 150px;
    margin-left: 30px;
  }
  .cols_mach_qa {
    float: left;
    width: 30%;
    height: auto;
  }
  input.num {
    width: 50px;
  }
  .ui-state-highlight {
    height: 60px;
    margin-bottom: 10px;
  }

  #group-lt-edit-qa-list {
    float: left;
    width: auto;
  }
  #group-rt-edit-qa-list {
    float: left;
    width: auto;
    margin: 0px 0px 0px 40px;
  }
</style>
<div id="profile">
  <div class="profile_header">Machine QA{sect_head_ext}</div>
  {sect_head_rt}
</div>
<div id="section">{section_nav}</div>
<div class="errors">{success}</div>
{warning}{error}
<div id="profile-content" style="display: {system-rights}">
  <div style="display: {machine-list}">
    <label class="switch" style="display: {machine-list}">
      <p class="switch-text">Show Active / All</p>
      <input
        type="checkbox"
        id="activetoggle"
        onclick="updatePreference(this);"
        {checked}
      />
      <span class="slider"></span>
    </label>
    <p>{mach}</p>
  </div>
  <div style="display: {edit-machines}">
    {fhead-mach-edit}
    <p>{mach-edit-name}</p>
    <p>{mach-edit-man}</p>
    <p>{mach-edit-sn}</p>
    <p>{mach-edit-type}</p>
    <p>{mach-edit-act}</p>
    <p>{submit-mach-edit}</p>
    {fend-mach-edit}
  </div>
  <div style="display: {add-machines}">
    {fhead-mach-add}
    <p>{mach-add-name}</p>
    <p>{mach-add-man}</p>
    <p>{mach-add-sn}</p>
    <p>{mach-add-type}</p>
    <p>{mach-add-act}</p>
    <p>{submit-mach-add}</p>
    {fend-mach-add}
  </div>

  <div style="display: {qa-records}">
    {pagination}
    <p>{qa_report_data}</p>
  </div>
  <div style="display: {qa-checklist}">
    <label class="switch" style="display: {qa-checklist}">
      <p class="switch-text">Show Active / All</p>
      <input
        type="checkbox"
        id="activetoggle"
        onclick="updatePreference(this);"
        {checked}
      />
      <span class="slider"></span>
    </label>
    {pagination}
    <p>{qa_checklist_data}</p>
  </div>
  <div style="display: {add-qa-checklist}">
    {fhead-chk-add}
    <p>{chk-add-name}</p>
    <p>{chk-add-mid}</p>
    <p>{submit-chk-add}</p>
    {fend-chk-add}
  </div>

  <div style="display: {edit-qa-checklist}">
    {fhead-chk-edit}
    <div id="group-lt-edit-qa-list" style="display: {edit-qa-list}">
      <p>{chk-edit-name}</p>
      <p>{chk-edit-mid}</p>
      <p>{chk-edit-version}{chk-edit-vers}</p>
      <p>{chk-edit-status-pub}{chk-edit-pubs}</p>
      <p>{chk-edit-status-act}</p>
      <p>{submit-chk-edit-settings}</p>
    </div>

    <div id="group-rt-edit-qa-list" style="display: {edit-qa-list}">
      <p class="header">
        Groups who receive notifications (<a href="{url}">Modify</a>)
      </p>
      <br />
      <p>{notification-groups}</p>
      <br />
      <p class="header">Individuals who receive notifications</p>
      <br />
      <p>
        {individual-list}
        <input type="button" onclick="addUser();" value="Add" class="submit" />
      </p>
      <p>{notification-individuals}</p>
    </div>

    <div class="clear" style="width: 1000px;"></div>

    <div style="display: {edit-qa-checklist}">
    <p class="header">Build QA Checklist</p>
    <p>{submit-add-fields} {submit-chk-edit}</p>
    <div id="divTxt_header">
      <span class="q">Question</span><span class="lbl">Label</span
      ><span class="q_typ">Question Type</span
      ><span class="q_reqd">Required</span>
    </div>
    <div id="divTxt">{qlist}</div>
    <br />

    <p>
      {submit-add-fields} {submit-chk-edit} {curr_ver_id}<input
        name="input_counter"
        type="hidden"
        id="input_counter"
        value="{initial_count}"
      />
    </p>
    </div>
    {fend-chk-edit}
  </div>

  <div style="display: {qa-checklist-history}">
    {pagination} {qa_history}
  </div>
</div>
<script type="text/javascript">
  $(document).ready(function () {
    $("#machines").tablesorter({ headers: { 4: { sorter: false } } });
    $("#qa-forms").tablesorter({ headers: { 2: { sorter: false } } });
    $("#qa-forms-details").tablesorter();
    $("#qa-records").tablesorter();
  });
</script>
<script type="text/javascript">
  var INITIAL_COUNT = "{initial_count}";
</script>
<script
  type="text/javascript"
  src="{website_loc}console/_scripts/form_functions_mach_qa.js"
></script>
<script type="text/javascript">
  $(document).ready(function () {
    $(".input_type").live("change", function () {
      this_textual_id = $(this).attr("id");
      var only_id = this_textual_id.replace("input_type", "");

      if ($("#input_type" + only_id + " option:selected").val() == "num") {
        $("#col_extra_values" + only_id).show();
      } else {
        $("#col_extra_values" + only_id).hide();
      }
    });

    $("#sbt_add").click(function () {
      var max = 0;
      $(".col_extra_values").each(function () {
        num = parseInt(this.id.replace("col_extra_values", ""));
        if (num > max) {
          max = num;
          this_id = max;
        }
      });
      if ($("#input_type" + this_id + " option:selected").val() == "num") {
        $("#col_extra_values" + this_id).show();
      } else {
        $("#col_extra_values" + this_id).hide();
      }

      var current_inputs_count = $("#input_counter").val();
      if (0 == current_inputs_count || "" == current_inputs_count) {
        var new_inputs_count = 1;
        $("#input_counter").val(new_inputs_count);
      } else {
        var new_inputs_count = parseFloat(current_inputs_count) + 1;
        $("#input_counter").val(new_inputs_count);
      }
    });
  });

  $(function () {
    $("#divTxt").sortable({
      placeholder: "ui-state-highlight",
      connectWith: "#divTxt",
      start: function (event, ui) {
        $("#divTxt").sortable("refresh");
      },
      update: function (event, ui) {
        var order = $("#divTxt").sortable("serialize");
        $(".errors").load("../_functions/process-machine-qa.php?" + order);
      },
    });
    $("#divTxt").disableSelection();
  });

  function updatePreference(cb) {
    if (cb.checked) {
      window.location.href = "{checkedurl}";
    } else {
      window.location.href = "{checkedurlfalse}";
    }
  }

  function addUser() {
    var e = document.getElementById("individual_list");
    var result = e.options[e.selectedIndex].value;
    window.location.href = "{addurl}" + "&addun=" + result;
  }
</script>
